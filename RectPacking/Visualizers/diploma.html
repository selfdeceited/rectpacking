<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" >
	<title>RectPacking</title>
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="index.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
	<script>
	$(document).ready(function(){
		$('#myModal').hide();

		var data = $.ajax({
			      type: "GET",
			      async: false,
			      dataType: "json",
			      url: 'data1.json',
			      success: function(data) {
			      	$("#myCanvas").attr("width", data.tables.width)
			      				 .attr("height", data.tables.height);
					draw( 0, 0,data.tables.width,data.tables.height, "white");
			        for (var i = 0; i < data.coas.length; i++) {
			        	var coa = data.coas[i];
			        	draw(coa.x, coa.Y, coa.width, coa.height, getRandomColor());
			      		}
			      },
	            error: function(XMLHttpRequest, textStatus, errorThrown) {
			        console.log("ajax error");
			        console.log(XMLHttpRequest);
			        console.log(errorThrown);
			        console.log(textStatus);
			      },
			    complete: function() {
			        console.log("ajax in complete");
			      }
			    });
	});
	function draw(x, y, w, h, fillColor) {
  	var ctx = document.getElementById('myCanvas').getContext('2d');
  	 //ctx.fillStyle = "#FF0000";//getRandomColor();//"
  	 //ctx.fillRect (x, y, w, h);
	  ctx.beginPath();
      ctx.rect(x, y, w, h);
      ctx.fillStyle = fillColor;
      ctx.fill();
      ctx.lineWidth = 1;
      ctx.strokeStyle = 'black';
      ctx.stroke();
	}
	function getRandomColor(){
		var colorArray = ["#8BD7FF","#D5B4FF","#99FFC6","#FFFDBB","#FFBA93","#FF9D9C", "#BDFFEE"];
		var randomId = 1 + Math.floor(Math.random() * colorArray.length);
		return colorArray[randomId];
	}
	</script>

</head>
<body>	
		<div id = "wrapper">
		<h1 style="margin:40px">RectPacking</h1>
		<div class="alert alert-info info" style="margin:20px;margin-left:10%">Не знаете, что делать? Ознакомьтесь с 
  			<a href="#" class="alert-link infoLink">информацией</a>
		</div>
		<div class = "canvaswrapper">
			<canvas id="myCanvas" align="center" style="margin:100px" width="500" height="500"></canvas>
		</div>
		<!--<p style="margin-left:10%">
			<a id="addTeam" class="btn" style="padding:10px;">Добавить новую команду</a>
			<a id="deleteTeam" class="btn btn-primary" style="padding:10px;">Удалить команду</a>
		</p>-->
		<a id="saveBtn" class="btn btn-large btn-primary" style="margin-left:30%;margin-right:5%">Сохранить результаты</a>
		<a id="clearBtn" class="btn btn-large">Обнулить результаты</a>
		</div>

		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="width:650px;">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title" id="myModalLabel">Информация</h4>
		      </div>
		      <div class="modal-body">
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default btn-primary" data-dismiss="modal">ОК</button>
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		
</body>
</html>